# In Process

## Create a Collection

This guide shows how to create an NFT collection using JavaScript with the Coinbase CDP SDK and viem.

### Try it Out

#### V0 Prototype

You can try out a working prototype of the Coinbase Smart Wallet at:
[Coinbase Wallet V0 Prototype](https://v0-coinbase-wallet-prototype.vercel.app/)

#### Deploy Your Own

Deploy your own version of the prototype with one click:

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fsweetmantech%2Fcoinbase-wallet-v2-app\&env=CDP_API_KEY_ID,CDP_API_KEY_SECRET,CDP_WALLET_SECRET,CDP_PAYMASTER_URL)

### Prerequisites

* Coinbase API credentials (API Key ID and Secret)
* A wallet secret for authentication
* Node.js environment

### Installation

```bash
npm install @coinbase/cdp-sdk viem
```

### Creating a Collection

The following example demonstrates how to create a new NFT collection using the Coinbase CDP SDK and viem:

```javascript
import { CdpClient } from "@coinbase/cdp-sdk";
import { type Address, encodeFunctionData } from "viem";

// ABI for the token contract (create function)
const tokenAbi = [
  {
    inputs: [
      { internalType: "string", name: "newContractURI", type: "string" },
      { internalType: "string", name: "name", type: "string" },
      {
        components: [
          { internalType: "uint32", name: "royaltyMintSchedule", type: "uint32" },
          { internalType: "uint32", name: "royaltyBPS", type: "uint32" },
          { internalType: "address", name: "royaltyRecipient", type: "address" },
        ],
        internalType: "struct ICreatorRoyaltiesControl.RoyaltyConfiguration",
        name: "defaultRoyaltyConfiguration",
        type: "tuple",
      },
      { internalType: "address payable", name: "defaultAdmin", type: "address" },
      { internalType: "bytes[]", name: "setupActions", type: "bytes[]" },
    ],
    name: "createContract",
    outputs: [{ internalType: "address", name: "", type: "address" }],
    stateMutability: "nonpayable",
    type: "function",
  },
] as const;

// Main function to create a collection
async function createCollection() {
  // Initialize CDP client with your credentials
  const cdp = new CdpClient({
    apiKeyId: process.env.CDP_API_KEY_ID,
    apiKeySecret: process.env.CDP_API_KEY_SECRET,
    walletSecret: process.env.CDP_WALLET_SECRET,
  });

  // Create a new account
  const evmAccount = await cdp.evm.createAccount();

  // Create a smart account (contract wallet)
  const smartAccount = await cdp.evm.createSmartAccount({
    owner: evmAccount,
  });

  // Collection details
  const contractUri = "ar://contractUri"; // Your contract metadata URI
  const collectionName = "My NFT Collection"; // Your collection name

  // Royalty configuration
  const royaltyConfig = {
    royaltyMintSchedule: 0,
    royaltyBPS: 0, // 0% royalties (set to 1000 for 10%)
    royaltyRecipient: smartAccount.address,
  };

  // Encode the function call data
  const createContractData = encodeFunctionData({
    abi: tokenAbi,
    functionName: "createContract",
    args: [
      contractUri,
      collectionName,
      royaltyConfig,
      smartAccount.address, // defaultAdmin
      [], // setupActions
    ],
  });

  // Send the transaction
  const sendResult = await cdp.evm.sendUserOperation({
    smartAccount,
    network: "base-sepolia", // supported networks: https://docs.cdp.coinbase.com/api/docs/networks#network-identifiers
    paymasterUrl: process.env.CDP_PAYMASTER_URL,
    calls: [
      {
        to: "0x6832A997D8616707C7b68721D6E9332E77da7F6C" as Address, // Contract factory address
        data: createContractData,
      },
    ],
  });

  // Wait for the transaction to be mined
  await cdp.evm.waitForUserOperation({
    smartAccountAddress: smartAccount.address,
    userOpHash: sendResult.userOpHash,
  });

  // Get the transaction details
  const userOp = await cdp.evm.getUserOperation({
    smartAccount,
    userOpHash: sendResult.userOpHash,
  });

  return {
    smartAccountAddress: smartAccount.address,
    transactionHash: userOp.transactionHash,
  };
}

// Call the function to create a collection
createCollection()
  .then(result => console.log("Collection created:", result))
  .catch(error => console.error("Error creating collection:", error));
```

### Environment Variables

Make sure to set the following environment variables:

```
CDP_API_KEY_ID=your_api_key_id
CDP_API_KEY_SECRET=your_api_key_secret
CDP_WALLET_SECRET=your_wallet_secret
CDP_PAYMASTER_URL=your_paymaster_url
```

### Next Steps

After creating your collection, you can:

* Mint NFTs within your collection
* Set up sales configurations
* Update collection metadata
* Add collection to marketplaces


## üöÄ Getting Started

Welcome to In Process! This guide will help you get started with our protocol.

### ‚ö° Quick Start

1. üåê Visit our website at [inprocess.fun](https://inprocess.fun/)
2. üîë Sign in
3. ‚ú® Create your first moment

### üîë API Keys

To collect moments and airdrop moments programmatically, you'll need to create an API key. This section provides a step-by-step guide to get your API key up and running.

#### Step 1: Access the API Keys Management Page

1. Navigate to the [In Process API Keys Management Page](https://inprocess.fun/manage/api-keys)
2. Sign in with email if you haven't already

#### Step 2: Create Your API Key

1. On the API Keys page, you'll see a form to create a new API key
2. Enter a descriptive name for your API key (e.g., "My Development Key", "Production API Key")
3. Click the "Create API Key" button
4. **Important**: Copy and securely store your API key immediately - it will only be shown once!

import { ZoomableImage } from "../../components/ZoomableImage";

<ZoomableImage src="https://7bt7g2qeqowboyeif56fzpo2vvwduall73kfociv3qqyvspkkzlq.arweave.net/-GfzagSDrBdgiC98XL3arWw6AWv-1FcJFdwhisnqVlc" alt="API Keys Management Page 1" className="mb-4" />

<ZoomableImage src="https://llu26toy4xwb3gu5oppj3epl6cs3y2yrir2bzgdzm3372drd6qma.arweave.net/WumvTdjl7B2anXPenZHr8KW8axFEdByYeWb3_Q4j9Bg" alt="API Keys Management Page 2" />

#### Step 3: Use Your API Key

Once you have your API key, you can use it to authenticate your requests to the In Process API:

```bash
curl -X GET https://inprocess.fun/api/moment/collect \
  -H "x-api-key: art_sk_3fnm4...f6w4" \
```

#### Next Steps

With your API key ready, you can now:

* [Collect moments](/moment/collect) - Use API key to collect moments programmatically
* [Airdrop moments](/moment/airdrop) - Use API key to airdrop moments to artists


## Browsing the Payments

Retrieve payment records from the In Process protocol. Supports filtering by artist and collector addresses.

### Endpoint

```http
GET https://inprocess.fun/api/payments
```

### Parameters

| Name      | Type   | Required | Default | Description                                                            |
| --------- | ------ | -------- | ------- | ---------------------------------------------------------------------- |
| artist    | string | No       | ‚Äî       | Filter by artist address (payments for tokens created by this artist)  |
| collector | string | No       | ‚Äî       | Filter by collector address (payments where this address is the buyer) |

If no parameters are provided, returns the latest payment records. If `collector` is provided, payments are filtered so the purchaser is the provided address. If `artist` is provided, filters where the token creator is the provided address.

### Request Examples

:::code-group
```bash [cURL]
curl -X GET "https://inprocess.fun/api/payments?artist=0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01&collector=0x4b4324bcC6dB9380ABBbbD20B24A16C11FB5B38A"
```

```python [Python]
import requests

def get_payments(artist: str = None, collector: str = None):
    url = "https://inprocess.fun/api/payments"
    params = {}
    if artist:
        params["artist"] = artist
    if collector:
        params["collector"] = collector
    response = requests.get(url, params=params)
    response.raise_for_status()
    return response.json()
```

```javascript [JavaScript]
async function getPayments(artist, collector) {
  const params = new URLSearchParams();
  if (artist) params.set("artist", artist);
  if (collector) params.set("collector", collector);
  const response = await fetch(`https://inprocess.fun/api/payments?${params}`);
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```

```typescript [TypeScript]
export interface Artist {
  address: string; // Artist address
  username: string; // Artist username
  bio: string; // Artist bio
  instagram_username: string; // Instagram handle
  twitter_username: string; // Twitter handle
  telegram_username: string; // Telegram handle
}

export interface Token {
  id: string; // UUID
  address: string; // Contract address
  tokenId: string; // Token ID
  uri: string; // Metadata URI
  defaultAdmin: string; // Admin address
  chainId: number; // Chain ID
  createdAt: string; // ISO timestamp
  hidden: boolean; // Whether token is hidden
}

export interface Payment {
  id: string; // UUID
  token: Token; // Full token object
  buyer: Artist; // Full artist object
  amount: string; // Numeric amount
  hash: string; // Transaction hash
  block: string; // Block number
}

export interface PaymentsResponse {
  status: string;
  payments: Payment[];
}

async function getPayments(
  artist?: string,
  collector?: string
): Promise<PaymentsResponse> {
  const params = new URLSearchParams();
  if (artist) params.set("artist", artist);
  if (collector) params.set("collector", collector);
  const response = await fetch(`https://inprocess.fun/api/payments?${params}`);
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```
:::

### Response Format

The API returns JSON responses. Here's an example success response:

```json
{
  "status": "success",
  "payments": [
    {
      "id": "bceddfb3-28f2-49f3-8669-73a813a06b90",
      "token": {
        "id": "5fc69bea-1a8a-47f0-8652-8bf041c16a06",
        "address": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
        "tokenId": "0",
        "uri": "ar://1wMmKuaz-VdxmruOQJuYS-3nfU3zlNKmPNpc79Ou-qM",
        "defaultAdmin": "0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01",
        "chainId": 8453,
        "createdAt": "2025-06-07T20:41:35+00:00",
        "hidden": false
      },
      "buyer": {
        "address": "0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01",
        "username": "digital_artist_1",
        "bio": "Digital artist exploring the intersection of technology and creativity",
        "instagram_username": "@digital_artist_1",
        "twitter_username": "@digital_artist_1",
        "telegram_username": "@digital_artist_1"
      },
      "amount": "0.1",
      "hash": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
      "block": "12345678"
    },
    {
      "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
      "token": {
        "id": "a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6",
        "address": "0x317e6E49970b95DD1bF2E7877110f3278CB8f1EA",
        "tokenId": "1",
        "uri": "ar://T5bcXlR7waq_aexj0Sp7SXR5uvwg3qAlMuai9oh6w-U",
        "defaultAdmin": "0x4b4324bcC6dB9380ABBbbD20B24A16C11FB5B38A",
        "chainId": 8453,
        "createdAt": "2025-06-07T17:13:07+00:00",
        "hidden": false
      },
      "buyer": {
        "address": "0x4b4324bcC6dB9380ABBbbD20B24A16C11FB5B38A",
        "username": "crypto_collector",
        "bio": "Passionate collector of digital art and NFTs",
        "instagram_username": "@crypto_collector",
        "twitter_username": "@crypto_collector",
        "telegram_username": "@crypto_collector"
      },
      "amount": "0.05",
      "hash": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
      "block": "12345679"
    }
  ]
}
```

### Response Properties

#### Response Object

| Property                              | Type    | Description                                  |
| ------------------------------------- | ------- | -------------------------------------------- |
| status                                | string  | Status of the request ("success" or "error") |
| payments                              | array   | List of payment records                      |
| payments\[].id                        | string  | UUID of the payment record                   |
| payments\[].token                     | object  | Full token object with all token details     |
| payments\[].token.id                  | string  | UUID of the token                            |
| payments\[].token.address             | string  | Contract address of the token                |
| payments\[].token.tokenId             | string  | Token ID                                     |
| payments\[].token.uri                 | string  | Metadata URI                                 |
| payments\[].token.defaultAdmin        | string  | Admin address of the token                   |
| payments\[].token.chainId             | number  | Chain ID where the token exists              |
| payments\[].token.createdAt           | string  | ISO timestamp when the token was created     |
| payments\[].token.hidden              | boolean | Whether the token is hidden                  |
| payments\[].buyer                     | object  | Full artist object with all buyer details    |
| payments\[].buyer.address             | string  | Address of the buyer                         |
| payments\[].buyer.username            | string  | Username of the buyer                        |
| payments\[].buyer.bio                 | string  | Bio of the buyer                             |
| payments\[].buyer.instagram\_username | string  | Instagram handle of the buyer                |
| payments\[].buyer.twitter\_username   | string  | Twitter handle of the buyer                  |
| payments\[].buyer.telegram\_username  | string  | Telegram handle of the buyer                 |
| payments\[].amount                    | string  | Numeric amount paid                          |
| payments\[].hash                      | string  | Transaction hash                             |
| payments\[].block                     | string  | Block number where the transaction occurred  |

### Error Response

If an error occurs, the API returns:

```json
{
  "status": "error",
  "message": "...error message..."
}
```


## üåê Protocol Deployments

Contract addresses for all supported networks.

### Base

* **Base (Mainnet):** `0x540C18B7f99b3b599c6FeB99964498931c211858`
  * [View on Etherscan ‚Üó](https://basescan.org/address/0x540C18B7f99b3b599c6FeB99964498931c211858)
  * [View on Thirdweb ‚Üó](https://thirdweb.com/base/0x540C18B7f99b3b599c6FeB99964498931c211858)
* **Base Sepolia (Testnet):** `0x6832A997D8616707C7b68721D6E9332E77da7F6C`
  * [View on Etherscan ‚Üó](https://sepolia.basescan.org/address/0x6832A997D8616707C7b68721D6E9332E77da7F6C)
  * [View on Thirdweb ‚Üó](https://thirdweb.com/base-sepolia-testnet/0x6832A997D8616707C7b68721D6E9332E77da7F6C)


## Setup Actions

Setup actions are essential for making your digital art tokens appear correctly on marketplaces like Zora, OpenSea, Rarible, and In Process. They provide the necessary metadata and configuration that marketplaces use to display and interact with your tokens.

> üõ†Ô∏è **Try it out**: Use the [Setup Actions Tool](https://setup-actions.vercel.app/) to easily generate setup actions for your collections.

This guide explains the various setup actions available and how to use them when creating collections and tokens.

### What are Setup Actions?

Setup actions are encoded function calls that are passed to the contract when creating a new digital art collection or token. They define various aspects of the token such as:

* Token metadata URI
* Supply limits
* Sales configuration
* Permissions
* Royalties

These actions can be mixed and matched to fit your specific needs as an artist or creator.

### Available Setup Actions

Here are the most commonly used setup actions for making your tokens visible and functional on marketplaces:

#### Setup New Token

Sets up basic token properties, including its metadata URI and maximum supply.

```javascript
import { zoraCreator1155ImplABI } from "@zoralabs/protocol-deployments";
import { encodeFunctionData } from "viem";

const getSetupNewTokenCall = (uri: string, maxSupply: bigint) =>
  encodeFunctionData({
    abi: zoraCreator1155ImplABI,
    functionName: "setupNewToken",
    args: [uri, maxSupply],
  });

// Example usage:
const tokenMetadataURI = "ar://your-arweave-uri"; // Arweave URI with token metadata
const maxSupply = 100n; // Max token supply (use -1n for unlimited)
const setupNewTokenAction = getSetupNewTokenCall(tokenMetadataURI, maxSupply);
```

#### Update Token URI

Updates the metadata URI for an existing token.

```javascript
import { zoraCreator1155ImplABI } from "@zoralabs/protocol-deployments";
import { encodeFunctionData } from "viem";

const getUpdateTokenURICall = (tokenId: bigint, newUri: string) =>
  encodeFunctionData({
    abi: zoraCreator1155ImplABI,
    functionName: "updateTokenURI",
    args: [tokenId, newUri],
  });

// Example usage:
const tokenId = 1n;
const newUri = "ar://updated-metadata-uri";
const updateURIAction = getUpdateTokenURICall(tokenId, newUri);
```

#### Update Royalties

Sets or updates royalty information for a token.

```javascript
import { zoraCreator1155ImplABI } from "@zoralabs/protocol-deployments";
import { encodeFunctionData, Address } from "viem";

const getUpdateRoyaltiesForTokenCall = (
  tokenId: bigint,
  royaltyBPS: number,
  royaltyRecipient: Address
) =>
  encodeFunctionData({
    abi: zoraCreator1155ImplABI,
    functionName: "updateRoyaltiesForToken",
    args: [
      tokenId,
      {
        royaltyBPS, // Basis points (e.g., 1000 = 10%)
        royaltyRecipient,
      },
    ],
  });

// Example usage:
const tokenId = 1n;
const royaltyBPS = 1000; // 10% royalty
const royaltyRecipient = "0x..."; // Address to receive royalties
const updateRoyaltiesAction = getUpdateRoyaltiesForTokenCall(
  tokenId,
  royaltyBPS,
  royaltyRecipient
);
```

#### Set Sale Configuration

Configures how the token can be sold, including pricing and timing.

```javascript
import { zoraCreator1155ImplABI } from "@zoralabs/protocol-deployments";
import { encodeFunctionData } from "viem";

const getSetSaleCall = (tokenId: bigint) =>
  encodeFunctionData({
    abi: zoraCreator1155ImplABI,
    functionName: "setSale",
    args: [
      tokenId,
      {
        saleStart: 0n, // Start immediately
        saleEnd: 0n, // 0 for no end time
        maxTokensPerAddress: 0n, // 0 for unlimited
        pricePerToken: 100000000000000n, // Price in wei (0.0001 ETH)
        fundsRecipient: "0x...", // Address to receive sale funds
      },
    ],
  });

// Example usage:
const tokenId = 1n; // The token ID (usually 1 for the first token)
const setSaleAction = getSetSaleCall(tokenId);
```

#### Set Minter Permission

Gives permission to a specific address to mint tokens.

```javascript
import { zoraCreator1155ImplABI } from "@zoralabs/protocol-deployments";
import { encodeFunctionData, Address } from "viem";

const getMinterPermissionCall = (tokenId: bigint, minter: Address) =>
  encodeFunctionData({
    abi: zoraCreator1155ImplABI,
    functionName: "addPermission",
    args: [
      tokenId,
      minter,
      2n, // Permission type: 2 for minting
    ],
  });

// Example usage:
const tokenId = 1n;
const minterAddress = "0x..."; // Address that can mint
const minterPermissionAction = getMinterPermissionCall(tokenId, minterAddress);
```

### Using Setup Actions When Creating a Collection

When you create a new digital art collection, you can include setup actions which are executed immediately after the collection is setup. Here's how to do it:

```javascript
import { CdpClient } from "@coinbase/cdp-sdk";
import { type Address, encodeFunctionData } from "viem";
import { zoraCreator1155ImplABI } from '@zoralabs/protocol-deployments';

// Token ABI for creating a contract
const tokenAbi = [/* ... contract ABI ... */];

// Setup actions for the first token
const tokenId = 1n; // First token ID is always 1
const tokenMetadataURI = "ar://your-arweave-uri";
const maxSupply = 100n;

// Create setup actions
const setupNewTokenAction = encodeFunctionData({
  abi: zoraCreator1155ImplABI,
  functionName: 'setupNewToken',
  args: [tokenMetadataURI, maxSupply],
});

const setSaleAction = encodeFunctionData({
  abi: zoraCreator1155ImplABI,
  functionName: 'setSale',
  args: [
    tokenId,
    {
      saleStart: 0n,
      saleEnd: 0n,
      maxTokensPerAddress: 0n,
      pricePerToken: 100000000000000n, // 0.0001 ETH
      fundsRecipient: "0xYourAddressHere" as Address,
    },
  ],
});

// Combine all setup actions into an array
const setupActions = [
  setupNewTokenAction,
  setSaleAction,
];

// Use setup actions when creating the collection
const createContractData = encodeFunctionData({
  abi: tokenAbi,
  functionName: "createContract",
  args: [
    "ar://contractUri",
    "My Art Collection",
    {
      royaltyMintSchedule: 0,
      royaltyBPS: 1000, // 10% royalties
      royaltyRecipient: smartAccount.address,
    },
    smartAccount.address,
    setupActions, // Pass the setup actions here
  ],
});

// Send the transaction
// ... rest of transaction code ...
```

### Combining Setup Actions for Better Marketplace Visibility

For optimal visibility on marketplaces like Zora, OpenSea, Rarible, and In Process, we recommend including at minimum these setup actions:

1. **setupNewToken** - To define the token metadata URI and supply
2. **updateTokenURI** - To ensure the token has the correct metadata
3. **updateRoyaltiesForToken** - To ensure you receive royalties on secondary sales

Here's a complete example of creating a collection with these combined setup actions:

```javascript
import { CdpClient } from "@coinbase/cdp-sdk";
import { type Address, encodeFunctionData } from "viem";
import { zoraCreator1155ImplABI } from '@zoralabs/protocol-deployments';

// Initialize CDP client
const cdp = new CdpClient({
  apiKeyId: process.env.CDP_API_KEY_ID,
  apiKeySecret: process.env.CDP_API_KEY_SECRET,
  walletSecret: process.env.CDP_WALLET_SECRET,
});

// Create account and smart account
const evmAccount = await cdp.evm.createAccount();
const smartAccount = await cdp.evm.createSmartAccount({
  owner: evmAccount,
});

// Token details
const tokenId = 1n;
const tokenMetadataURI = "ar://your-arweave-metadata";
const contractUri = "ar://your-contract-metadata";
const collectionName = "My Amazing Collection";

// Setup actions
const setupActions = [
  // Setup the token
  encodeFunctionData({
    abi: zoraCreator1155ImplABI,
    functionName: 'setupNewToken',
    args: [tokenMetadataURI, 100n], // 100 max supply
  }),

  // Update token URI
  encodeFunctionData({
    abi: zoraCreator1155ImplABI,
    functionName: 'updateTokenURI',
    args: [tokenId, tokenMetadataURI],
  }),

  // Set royalties
  encodeFunctionData({
    abi: zoraCreator1155ImplABI,
    functionName: 'updateRoyaltiesForToken',
    args: [
      tokenId,
      {
        royaltyBPS: 1000, // 10%
        royaltyRecipient: smartAccount.address,
      },
    ],
  }),
];

// Create the collection with setup actions
const createContractData = encodeFunctionData({
  abi: tokenAbi, // Your token contract ABI
  functionName: "createContract",
  args: [
    contractUri,
    collectionName,
    {
      royaltyMintSchedule: 0,
      royaltyBPS: 1000,
      royaltyRecipient: smartAccount.address,
    },
    smartAccount.address,
    setupActions,
  ],
});

// Send the transaction
const sendResult = await cdp.evm.sendUserOperation({
  smartAccount,
  network: "base-sepolia",
  paymasterUrl: process.env.CDP_PAYMASTER_URL,
  calls: [
    {
      to: "0x6832A997D8616707C7b68721D6E9332E77da7F6C" as Address,
      data: createContractData,
    },
  ],
});

// Complete the transaction processing
// ... rest of the code ...
```

### Conclusion

Setup actions are powerful tools for configuring your digital art tokens. By properly configuring these actions, you ensure your tokens display correctly on marketplaces and have the functionality you desire.

Remember that setup actions can be mixed and matched based on your specific requirements. Experiment with different combinations to create the ideal experience for your collectors across Zora, OpenSea, Rarible, and other popular marketplaces.


## Upload Files to Arweave

> **For Feria Nounish Artists:** This documentation is inspired by Gabriel Lago from Cali, Colombia, who is building a Feria Nounish MiniApp for the artists participating in this year's fair. The `clientUploadToArweave` function enables artists to upload their artwork and metadata to decentralized storage, creating permanent, onchain records of their contributions to the collective timeline.

Upload files to Arweave decentralized storage for use in your NFT collections and moments. This function is perfect for artists participating in events like Feria Nounish who need to store metadata and assets onchain.

> **Note:** This function uploads files to Arweave and returns a URI that can be used in [collection creation](/create-collection) or [moment creation](/moment/create).

### Installation

First, install the required Arweave package:

```bash
npm install arweave
```

### Function Implementation

```typescript
import Arweave from "arweave";

const arweave = Arweave.init({
  host: "arweave.net",
  port: 443,
  protocol: "https",
  timeout: 20000,
  logging: false,
});

const clientUploadToArweave = async (
  file: File,
  getProgress: (progress: number) => void = () => {}
): Promise<string> => {
  const ARWEAVE_KEY = JSON.parse(
    Buffer.from(
      process.env.NEXT_PUBLIC_ARWEAVE_KEY as string,
      "base64"
    ).toString()
  );
  const buffer = await file.arrayBuffer();

  const transaction = await arweave.createTransaction(
    {
      data: buffer,
    },
    ARWEAVE_KEY
  );
  transaction.addTag("Content-Type", file.type);
  await arweave.transactions.sign(transaction, ARWEAVE_KEY);
  const uploader = await arweave.transactions.getUploader(transaction);

  while (!uploader.isComplete) {
    console.log(
      `${uploader.pctComplete}% complete, ${uploader.uploadedChunks}/${uploader.totalChunks}`
    );
    getProgress(uploader.pctComplete);
    await uploader.uploadChunk();
  }

  return `ar://${transaction.id}`;
};

export default clientUploadToArweave;
```

### Parameters

| Parameter   | Type                       | Required | Description                                                 |
| ----------- | -------------------------- | -------- | ----------------------------------------------------------- |
| file        | File                       | Yes      | The file to upload to Arweave                               |
| getProgress | (progress: number) => void | No       | Optional callback function to track upload progress (0-100) |

### Return Value

Returns a Promise that resolves to a string containing the Arweave URI in the format: `ar://{transaction_id}`

### Environment Setup

You'll need to set up your Arweave wallet key as an environment variable:

```bash
# Your Arweave wallet key (base64 encoded)
NEXT_PUBLIC_ARWEAVE_KEY=your_base64_encoded_arweave_key_here
```

### Usage Examples

#### Basic Upload

```typescript
import clientUploadToArweave from "./clientUploadToArweave";

// Upload a file
const file = document.getElementById("fileInput").files[0];
const arweaveUri = await clientUploadToArweave(file);
console.log("File uploaded to:", arweaveUri);
// Output: ar://abc123...
```

#### Upload with Progress Tracking

```typescript
import clientUploadToArweave from "./clientUploadToArweave";

const file = document.getElementById("fileInput").files[0];

// Track upload progress
const handleProgress = (progress: number) => {
  console.log(`Upload progress: ${progress}%`);
  // Update your UI progress bar
  document.getElementById("progressBar").style.width = `${progress}%`;
};

try {
  const arweaveUri = await clientUploadToArweave(file, handleProgress);
  console.log("Upload complete:", arweaveUri);
} catch (error) {
  console.error("Upload failed:", error);
}
```

#### Upload for Collection Metadata

```typescript
import clientUploadToArweave from "./clientUploadToArweave";

// Upload collection metadata JSON
const metadata = {
  name: "Feria Nounish Collection",
  description: "Artwork from the Feria Nounish fair",
  image: "https://example.com/collection-image.jpg",
  external_link: "https://ferianounish.com",
};

// Convert metadata to file
const metadataBlob = new Blob([JSON.stringify(metadata, null, 2)], {
  type: "application/json",
});
const metadataFile = new File([metadataBlob], "metadata.json", {
  type: "application/json",
});

// Upload to Arweave
const contractUri = await clientUploadToArweave(metadataFile);
console.log("Contract URI:", contractUri);
// Use this URI in your collection creation
```

#### Upload for Moment Content

```typescript
import clientUploadToArweave from "./clientUploadToArweave";

// Upload moment content (text, image, etc.)
const momentContent = {
  title: "My Feria Moment",
  content: "This is my contribution to the collective timeline",
  media: "https://example.com/my-artwork.jpg",
  timestamp: new Date().toISOString(),
};

const contentBlob = new Blob([JSON.stringify(momentContent, null, 2)], {
  type: "application/json",
});
const contentFile = new File([contentBlob], "moment.json", {
  type: "application/json",
});

const momentUri = await clientUploadToArweave(contentFile);
console.log("Moment URI:", momentUri);
// Use this URI when creating your moment
```

### React Hook Example

For React applications, here's a custom hook for file uploads:

```typescript
import { useState } from "react";
import clientUploadToArweave from "./clientUploadToArweave";

export const useArweaveUpload = () => {
  const [isUploading, setIsUploading] = useState(false);
  const [progress, setProgress] = useState(0);
  const [error, setError] = useState<string | null>(null);

  const uploadFile = async (file: File): Promise<string> => {
    setIsUploading(true);
    setProgress(0);
    setError(null);

    try {
      const uri = await clientUploadToArweave(file, setProgress);
      setIsUploading(false);
      return uri;
    } catch (err) {
      setError(err instanceof Error ? err.message : "Upload failed");
      setIsUploading(false);
      throw err;
    }
  };

  return {
    uploadFile,
    isUploading,
    progress,
    error,
  };
};

// Usage in component
const MyComponent = () => {
  const { uploadFile, isUploading, progress, error } = useArweaveUpload();

  const handleFileUpload = async (
    event: React.ChangeEvent<HTMLInputElement>
  ) => {
    const file = event.target.files?.[0];
    if (file) {
      try {
        const uri = await uploadFile(file);
        console.log("Uploaded to:", uri);
      } catch (err) {
        console.error("Upload failed:", err);
      }
    }
  };

  return (
    <div>
      <input type="file" onChange={handleFileUpload} />
      {isUploading && (
        <div>
          <p>Uploading... {progress}%</p>
          <progress value={progress} max={100} />
        </div>
      )}
      {error && <p style={{ color: "red" }}>Error: {error}</p>}
    </div>
  );
};
```

### File Types Supported

The function supports any file type that can be stored on Arweave:

* **Images**: PNG, JPEG, GIF, SVG, WebP
* **Documents**: PDF, TXT, MD
* **Data**: JSON, CSV, XML
* **Media**: MP4, MP3, WebM
* **Archives**: ZIP, TAR

### Best Practices

1. **File Size**: Arweave has no strict size limits, but larger files take longer to upload and cost more AR tokens.

2. **Content-Type Tagging**: The function automatically tags files with their MIME type for proper handling.

3. **Progress Tracking**: Always implement progress tracking for better user experience, especially for larger files.

4. **Error Handling**: Wrap upload calls in try-catch blocks to handle network issues or insufficient AR tokens.

5. **Metadata Structure**: When uploading JSON metadata, follow standard NFT metadata schemas for compatibility with marketplaces.

### Integration with Collection Creation

After uploading your metadata to Arweave, use the returned URI in your collection creation:

```typescript
// Upload collection metadata
const contractUri = await clientUploadToArweave(metadataFile);

// Use in collection creation
const createContractData = encodeFunctionData({
  abi: tokenAbi,
  functionName: "createContract",
  args: [
    contractUri, // Use the Arweave URI here
    collectionName,
    royaltyConfig,
    smartAccount.address,
    [],
  ],
});
```

### Error Handling

Common errors and solutions:

* **Insufficient AR tokens**: Ensure your Arweave wallet has enough AR tokens for the upload
* **Invalid wallet key**: Verify your `NEXT_PUBLIC_ARWEAVE_KEY` is correctly base64 encoded
* **Network timeout**: Increase the timeout value in the Arweave configuration
* **File too large**: Consider compressing or optimizing your files before upload

### Next Steps

After uploading files to Arweave:

* [Create a collection](/create-collection) using your uploaded metadata URI
* [Create moments](/moment/create) with your uploaded content
* [Browse the timeline](/timeline) to see your contributions


## in‚Ä¢process Timeline

Browse the moments from in‚Ä¢process collective timeline. This endpoint returns moments that are being created, indexed, or are in a pending state. Supports pagination for efficient browsing.

### Endpoint

```http
GET https://inprocess.fun/api/timeline/inprocess
```

### Parameters

| Name      | Type    | Required | Default | Description                                                                      |
| --------- | ------- | -------- | ------- | -------------------------------------------------------------------------------- |
| limit     | number  | No       | 100     | Number of records per page (max: 100)                                            |
| page      | number  | No       | 1       | The page number to retrieve                                                      |
| chain\_id | number  | No       | 8453    | Filter by chain ID (default: Base chain, 8453)                                   |
| hidden    | boolean | No       | false   | If true, includes moments marked as hidden by the default admin (default: false) |

You can filter by chain using the `chain_id` parameter (default: 8453 for Base). To include moments that have been marked as hidden by the admin, set the `hidden` parameter to `true` (defaults to `false`).

### Request Examples

:::code-group
```bash [cURL]
curl -X GET "https://inprocess.fun/api/timeline/inprocess?chain_id=8453&limit=2&page=1&hidden=true"
```

```python [Python]
import requests

def get_timeline_inprocess(page: int = 1, limit: int = 100, chain_id: int = 8453, hidden: bool = False):
    url = "https://inprocess.fun/api/timeline/inprocess"
    params = {"page": page, "limit": limit, "chain_id": chain_id}
    if hidden:
        params["hidden"] = str(hidden).lower()
    response = requests.get(url, params=params)
    response.raise_for_status()
    return response.json()
```

```javascript [JavaScript]
async function getTimelineInProcess(
  page = 1,
  limit = 100,
  chain_id = 8453,
  hidden = false
) {
  const params = new URLSearchParams({
    page: page.toString(),
    limit: limit.toString(),
    chain_id: chain_id.toString(),
  });
  if (hidden) params.set("hidden", hidden.toString());
  const response = await fetch(
    `https://inprocess.fun/api/timeline/inprocess?${params}`
  );
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```

```typescript [TypeScript]
export interface Admin {
  address: string; // Address
  username: string; // Username of the admin/artist, if available
  defaultAdmin: boolean; // Whether this admin is the default admin
  hidden: boolean; // Whether the moment is hidden by this admin
}

export interface Moment {
  address: string; // Address
  token_id: string;
  chain_id: number;
  id: string; // uuid
  uri: string;
  admins: Admin[];
  created_at: string; // timestampz
}

export interface TimelineInProcessResponse {
  status: string;
  moments: Moment[];
  pagination: {
    page: number;
    limit: number;
    total_pages: number;
  };
}

async function getTimelineInProcess(
  page: number = 1,
  limit: number = 100,
  chain_id: number = 8453,
  hidden: boolean = false
): Promise<TimelineInProcessResponse> {
  const params = new URLSearchParams({
    page: page.toString(),
    limit: limit.toString(),
    chain_id: chain_id.toString(),
  });
  if (hidden) params.set("hidden", hidden.toString());
  const response = await fetch(
    `https://inprocess.fun/api/timeline/inprocess?${params}`
  );
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```
:::

### Response Format

The API returns JSON responses. Here's an example success response:

```json
{
  "status": "success",
  "moments": [
    {
      "address": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
      "token_id": "1",
      "max_supply": 17256554458,
      "chain_id": 8453,
      "id": "bceddfb3-28f2-49f3-8669-73a813a06b90",
      "uri": "ar://1wMmKuaz-VdxmruOQJuYS-3nfU3zlNKmPNpc79Ou-qM",
      "admins": [
        {
          "address": "0x4b4324bcC6dB9380ABBbbD20B24A16C11FB5B38A",
          "username": "artist name 1",
          "defaultAdmin": true,
          "hidden": true
        },
        {
          "address": "0xAF1452d289E22FbD0DEA9d5097353c72a90FAC33",
          "username": "artist name 2",
          "hidden": false
        }
      ],
      "created_at": "2025-06-07T20:41:35+00:00",
      "updated_at": "2025-08-12T12:28:41+00:00"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 1,
    "total_pages": 2
  }
}
```

### Response Properties

#### Response Object

| Property                          | Type    | Description                                            |
| --------------------------------- | ------- | ------------------------------------------------------ |
| status                            | string  | Status of the request ("success" or "error")           |
| moments                           | array   | List of moments in the in-process timeline             |
| moments\[].address                | string  | Moment collection address                              |
| moments\[].token\_id              | string  | Token Id of Moment                                     |
| moments\[].chain\_id              | number  | Chain ID                                               |
| moments\[].id                     | string  | UUID of the moment                                     |
| moments\[].uri                    | string  | Metadata URI                                           |
| moments\[].admins                 | array   | Array of admin objects associated with the moment      |
| moments\[].admins\[].address      | string  | Admin artist address                                   |
| moments\[].admins\[].username     | string  | Username of the admin/artist, if available             |
| moments\[].admins\[].defaultAdmin | boolean | Whether this admin is the default admin for the moment |
| moments\[].admins\[].hidden       | boolean | Whether the moment is hidden by this admin             |
| moments\[].created\_at            | string  | ISO timestamp when the moment was created              |
| moments\[].updated\_at            | string  | ISO timestamp when the moment metadata was updated     |
| pagination                        | object  | Pagination metadata for the response                   |
| pagination.page                   | number  | Current page number                                    |
| pagination.limit                  | number  | Number of moments per page                             |
| pagination.total\_pages           | number  | Total number of pages available                        |

### Error Response

If an error occurs, the API returns:

```json
{
  "status": "error",
  "message": "...error message..."
}
```


## Artist Timeline

Retrieve moments from a specific artist's timeline. This endpoint returns all moments administered by a particular artist address. Supports pagination for efficient browsing.

### Endpoint

```http
GET https://inprocess.fun/api/timeline/artist
```

### Parameters

| Name      | Type                | Required | Default | Description                                                                                                                                     |
| --------- | ------------------- | -------- | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| address   | string              | Yes      | ‚Äî       | Filter by admin address (only moments administered by this artist address)                                                                      |
| limit     | number              | No       | 100     | Number of records per page (max: 100)                                                                                                           |
| page      | number              | No       | 1       | The page number to retrieve                                                                                                                     |
| chain\_id | number              | No       | 8453    | Filter by chain ID (default: Base chain, 8453)                                                                                                  |
| hidden    | boolean             | No       | false   | If true, includes moments marked as hidden by the admin (default: false)                                                                        |
| type      | "mutual" or "alone" | No       | "alone" | Determines whether to show moments where the artist is the sole admin (`"alone"`, default) or moments co-administered with others (`"mutual"`). |

The `address` parameter is required and filters the timeline to only show moments administered by that specific artist address. You can also filter by chain using the `chain_id` parameter (default: 8453 for Base). To include moments that have been marked as hidden by the admin, set the `hidden` parameter to `true` (defaults to `false`).

### Request Examples

:::code-group
```bash [cURL]
curl -X GET "https://inprocess.fun/api/timeline/artist?address=0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01&chain_id=8453&limit=2&page=1&hidden=true"
```

```python [Python]
import requests

def get_artist_timeline(address: str, page: int = 1, limit: int = 100, chain_id: int = 8453, hidden: bool = False, type: str = "alone"):
    url = "https://inprocess.fun/api/timeline/artist"
    params = {"address": address, "page": page, "limit": limit, "chain_id": chain_id, "type": type}
    if hidden:
        params["hidden"] = str(hidden).lower()
    response = requests.get(url, params=params)
    response.raise_for_status()
    return response.json()
```

```javascript [JavaScript]
async function getArtistTimeline(
  address,
  page = 1,
  limit = 100,
  chain_id = 8453,
  hidden = false,
  type = "alone"
) {
  const params = new URLSearchParams({
    address: address,
    page: page.toString(),
    limit: limit.toString(),
    chain_id: chain_id.toString(),
    type: type,
  });
  if (hidden) params.set("hidden", hidden.toString());
  const response = await fetch(
    `https://inprocess.fun/api/timeline/artist?${params}`
  );
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```

```typescript [TypeScript]
export interface Admin {
  address: string; // Address
  username: string; // Username of the admin/artist, if available
  defaultAdmin: boolean; // Whether this admin is the default admin
  hidden: boolean; // Whether the moment is hidden by this admin
}

export interface Moment {
  address: string; // Address
  token_id: string;
  chain_id: number;
  id: string; // uuid
  uri: string;
  admins: Admin[];
  created_at: string; // timestampz
}

export interface ArtistTimelineResponse {
  status: string;
  moments: Moment[];
  pagination: {
    page: number;
    limit: number;
    total_pages: number;
  };
}

async function getArtistTimeline(
  address: string,
  page: number = 1,
  limit: number = 100,
  chain_id: number = 8453,
  hidden: boolean = false,
  type: "mutual" | "alone" = "alone"
): Promise<ArtistTimelineResponse> {
  const params = new URLSearchParams({
    address: address,
    page: page.toString(),
    limit: limit.toString(),
    chain_id: chain_id.toString(),
    type: type,
  });
  if (hidden) params.set("hidden", hidden.toString());
  const response = await fetch(
    `https://inprocess.fun/api/timeline/artist?${params}`
  );
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```
:::

### Response Format

The API returns JSON responses. Here's an example success response:

```json
{
  "status": "success",
  "moments": [
    {
      "address": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
      "token_id": "1",
      "max_supply": 17256554458,
      "chain_id": 8453,
      "id": "bceddfb3-28f2-49f3-8669-73a813a06b90",
      "uri": "ar://1wMmKuaz-VdxmruOQJuYS-3nfU3zlNKmPNpc79Ou-qM",
      "admins": [
        {
          "address": "0x4b4324bcC6dB9380ABBbbD20B24A16C11FB5B38A",
          "username": "artist name 1",
          "defaultAdmin": true,
          "hidden": true
        },
        {
          "address": "0xAF1452d289E22FbD0DEA9d5097353c72a90FAC33",
          "username": "artist name 2",
          "hidden": false
        }
      ],
      "created_at": "2025-06-07T20:41:35+00:00",
      "updated_at": "2025-08-12T12:28:41+00:00"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 1,
    "total_pages": 2
  }
}
```

### Response Properties

#### Response Object

| Property                          | Type    | Description                                            |
| --------------------------------- | ------- | ------------------------------------------------------ |
| status                            | string  | Status of the request ("success" or "error")           |
| moments                           | array   | List of moments in the artist's timeline               |
| moments\[].address                | string  | Moment collection address                              |
| moments\[].token\_id              | string  | Token Id of Moment                                     |
| moments\[].chain\_id              | number  | Chain ID                                               |
| moments\[].id                     | string  | UUID of the moment                                     |
| moments\[].uri                    | string  | Metadata URI                                           |
| moments\[].admins                 | array   | Array of admin objects associated with the moment      |
| moments\[].admins\[].address      | string  | Admin artist address                                   |
| moments\[].admins\[].username     | string  | Username of the admin/artist, if available             |
| moments\[].admins\[].defaultAdmin | boolean | Whether this admin is the default admin for the moment |
| moments\[].admins\[].hidden       | boolean | Whether the moment is hidden by this admin             |
| moments\[].created\_at            | string  | ISO timestamp when the moment was created              |
| moments\[].updated\_at            | string  | ISO timestamp when the moment metadata was updated     |
| pagination                        | object  | Pagination metadata for the response                   |
| pagination.page                   | number  | Current page number                                    |
| pagination.limit                  | number  | Number of moments per page                             |
| pagination.total\_pages           | number  | Total number of pages available                        |

### Error Response

If an error occurs, the API returns:

```json
{
  "status": "error",
  "message": "...error message..."
}
```


## Getting a Smart Wallet

This page documents the API endpoint to get a smart wallet connected to an artist wallet on the In Process protocol.

### Endpoint

```
GET https://inprocess.fun/api/smartwallet
```

### Query Parameters

Send the address as a query parameter in the URL:

| Name           | Type   | Required | Default | Description                                     |
| -------------- | ------ | -------- | ------- | ----------------------------------------------- |
| artist\_wallet | string | Yes      | ‚Äî       | The artist wallet address to get a smart wallet |

### Example Request

:::code-group
```bash [cURL]
curl -X GET "https://inprocess.fun/api/smartwallet?artist_wallet=0x51027631B9DEF86e088C33368eC4E3A4BE0aD264"
```

```python [Python]
import requests
params = {}
params["artist_wallet"] = "0x51027631B9DEF86e088C33368eC4E3A4BE0aD264"
url = "https://inprocess.fun/api/smartwallet"
response = requests.get(url, params=params)
print(response.json())
```

```javascript [JavaScript]
const params = new URLSearchParams();
params.set("artist_wallet", "0x51027631B9DEF86e088C33368eC4E3A4BE0aD264");
const response = await fetch(`https://inprocess.fun/api/smartwallet?${params}`);
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface GetSmartWalletResponse {
  address: string;
}
const params = new URLSearchParams();
params.set("artist_wallet", "0x51027631B9DEF86e088C33368eC4E3A4BE0aD264");
const response = await fetch(`https://inprocess.fun/api/smartwallet?${params}`);
const data: GetSmartWalletResponse = await response.json();
console.log(data);
```
:::

### Example Response

```json
{
  "address": "0x06a1bb8d0dccf8c7d7bad3a28352ba0a5d3a3df3" // smart wallet address connected to artist wallet
}
```


## Browsing Notifications

Retrieve notification records from the In Process protocol. Supports filtering by artist address.

### Endpoint

```http
GET https://inprocess.fun/api/notifications
```

### Parameters

| Name   | Type    | Required | Default | Description                                                   |
| ------ | ------- | -------- | ------- | ------------------------------------------------------------- |
| artist | string  | No       | ‚Äî       | Filter by artist address (notifications for this artist)      |
| viewed | boolean | No       | ‚Äî       | Filter by viewed status (true for viewed, false for unviewed) |

If no parameters are provided, returns the latest notification records. If `artist` is provided, filters notifications where the artist is the provided address. If `viewed` is provided, filters notifications by their viewed status.

### Request Examples

:::code-group
```bash [cURL]
curl -X GET "https://inprocess.fun/api/notifications?artist=0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01&viewed=false"
```

```python [Python]
import requests

def get_notifications(artist: str = None, viewed: bool = None):
    url = "https://inprocess.fun/api/notifications"
    params = {}
    if artist:
        params["artist"] = artist
    if viewed is not None:
        params["viewed"] = str(viewed).lower()
    response = requests.get(url, params=params)
    response.raise_for_status()
    return response.json()
```

```javascript [JavaScript]
async function getNotifications(artist, viewed) {
  const params = new URLSearchParams();
  if (artist) params.set("artist", artist);
  if (viewed !== undefined) params.set("viewed", viewed.toString());
  const response = await fetch(
    `https://inprocess.fun/api/notifications?${params}`
  );
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```

```typescript [TypeScript]
export interface Artist {
  address: string; // Artist address
  username: string; // Artist username
  bio: string; // Artist bio
  instagram_username: string; // Instagram handle
  twitter_username: string; // Twitter handle
  telegram_username: string; // Telegram handle
}

export interface Token {
  id: string; // UUID
  address: string; // Contract address
  tokenId: string; // Token ID
  uri: string; // Metadata URI
  defaultAdmin: string; // Admin address
  chainId: number; // Chain ID
  createdAt: string; // ISO timestamp
  hidden: boolean; // Whether token is hidden
}

export interface Payment {
  id: string; // UUID
  token: Token; // Full token object
  buyer: Artist; // Full artist object
  amount: string; // Numeric amount
  hash: string; // Transaction hash
  block: string; // Block number
}

export interface Notification {
  id: string; // UUID
  payment: Payment; // Full payment object
  artist: Artist; // Full artist object
  viewed: boolean; // Whether the notification has been viewed
  created_at: string; // ISO timestamp when the notification was created
}

export interface NotificationsResponse {
  status: string;
  notifications: Notification[];
}

async function getNotifications(
  artist?: string,
  viewed?: boolean
): Promise<NotificationsResponse> {
  const params = new URLSearchParams();
  if (artist) params.set("artist", artist);
  if (viewed !== undefined) params.set("viewed", viewed.toString());
  const response = await fetch(
    `https://inprocess.fun/api/notifications?${params}`
  );
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```
:::

### Response Format

The API returns JSON responses. Here's an example success response:

```json
{
  "status": "success",
  "notifications": [
    {
      "id": "bceddfb3-28f2-49f3-8669-73a813a06b90",
      "payment": {
        "id": "5fc69bea-1a8a-47f0-8652-8bf041c16a06",
        "token": {
          "id": "a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6",
          "address": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
          "tokenId": "0",
          "uri": "ar://1wMmKuaz-VdxmruOQJuYS-3nfU3zlNKmPNpc79Ou-qM",
          "defaultAdmin": "0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01",
          "chainId": 8453,
          "createdAt": "2025-06-07T20:41:35+00:00",
          "hidden": false
        },
        "buyer": {
          "address": "0x4b4324bcC6dB9380ABBbbD20B24A16C11FB5B38A",
          "username": "crypto_collector",
          "bio": "Passionate collector of digital art and NFTs",
          "instagram_username": "@crypto_collector",
          "twitter_username": "@crypto_collector",
          "telegram_username": "@crypto_collector"
        },
        "amount": "0.1",
        "hash": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
        "block": "12345678"
      },
      "artist": {
        "address": "0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01",
        "username": "digital_artist_1",
        "bio": "Digital artist exploring the intersection of technology and creativity",
        "instagram_username": "@digital_artist_1",
        "twitter_username": "@digital_artist_1",
        "telegram_username": "@digital_artist_1"
      },
      "viewed": false,
      "created_at": "2025-06-07T20:41:35+00:00"
    },
    {
      "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
      "payment": {
        "id": "a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6",
        "token": {
          "id": "b2c3d4e5-f6g7-h8i9-j0k1-l2m3n4o5p6q7",
          "address": "0x317e6E49970b95DD1bF2E7877110f3278CB8f1EA",
          "tokenId": "1",
          "uri": "ar://T5bcXlR7waq_aexj0Sp7SXR5uvwg3qAlMuai9oh6w-U",
          "defaultAdmin": "0x4b4324bcC6dB9380ABBbbD20B24A16C11FB5B38A",
          "chainId": 8453,
          "createdAt": "2025-06-07T17:13:07+00:00",
          "hidden": false
        },
        "buyer": {
          "address": "0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01",
          "username": "digital_artist_1",
          "bio": "Digital artist exploring the intersection of technology and creativity",
          "instagram_username": "@digital_artist_1",
          "twitter_username": "@digital_artist_1",
          "telegram_username": "@digital_artist_1"
        },
        "amount": "0.05",
        "hash": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
        "block": "12345679"
      },
      "artist": {
        "address": "0x4b4324bcC6dB9380ABBbbD20B24A16C11FB5B38A",
        "username": "crypto_collector",
        "bio": "Passionate collector of digital art and NFTs",
        "instagram_username": "@crypto_collector",
        "twitter_username": "@crypto_collector",
        "telegram_username": "@crypto_collector"
      },
      "viewed": true,
      "created_at": "2025-06-07T17:13:07+00:00"
    }
  ]
}
```

### Response Properties

#### Response Object

| Property                                           | Type    | Description                                     |
| -------------------------------------------------- | ------- | ----------------------------------------------- |
| status                                             | string  | Status of the request ("success" or "error")    |
| notifications                                      | array   | List of notification records                    |
| notifications\[].id                                | string  | UUID of the notification record                 |
| notifications\[].payment                           | object  | Full payment object with all payment details    |
| notifications\[].payment.id                        | string  | UUID of the payment record                      |
| notifications\[].payment.token                     | object  | Full token object with all token details        |
| notifications\[].payment.token.id                  | string  | UUID of the token                               |
| notifications\[].payment.token.address             | string  | Contract address of the token                   |
| notifications\[].payment.token.tokenId             | string  | Token ID                                        |
| notifications\[].payment.token.uri                 | string  | Metadata URI                                    |
| notifications\[].payment.token.defaultAdmin        | string  | Admin address of the token                      |
| notifications\[].payment.token.chainId             | number  | Chain ID where the token exists                 |
| notifications\[].payment.token.createdAt           | string  | ISO timestamp when the token was created        |
| notifications\[].payment.token.hidden              | boolean | Whether the token is hidden                     |
| notifications\[].payment.buyer                     | object  | Full artist object with all buyer details       |
| notifications\[].payment.buyer.address             | string  | Address of the buyer                            |
| notifications\[].payment.buyer.username            | string  | Username of the buyer                           |
| notifications\[].payment.buyer.bio                 | string  | Bio of the buyer                                |
| notifications\[].payment.buyer.instagram\_username | string  | Instagram handle of the buyer                   |
| notifications\[].payment.buyer.twitter\_username   | string  | Twitter handle of the buyer                     |
| notifications\[].payment.buyer.telegram\_username  | string  | Telegram handle of the buyer                    |
| notifications\[].payment.amount                    | string  | Numeric amount paid                             |
| notifications\[].payment.hash                      | string  | Transaction hash                                |
| notifications\[].payment.block                     | string  | Block number where the transaction occurred     |
| notifications\[].artist                            | object  | Full artist object with all artist details      |
| notifications\[].artist.address                    | string  | Address of the artist                           |
| notifications\[].artist.username                   | string  | Username of the artist                          |
| notifications\[].artist.bio                        | string  | Bio of the artist                               |
| notifications\[].artist.instagram\_username        | string  | Instagram handle of the artist                  |
| notifications\[].artist.twitter\_username          | string  | Twitter handle of the artist                    |
| notifications\[].artist.telegram\_username         | string  | Telegram handle of the artist                   |
| notifications\[].viewed                            | boolean | Whether the notification has been viewed        |
| notifications\[].created\_at                       | string  | ISO timestamp when the notification was created |

### Error Response

If an error occurs, the API returns:

```json
{
  "status": "error",
  "message": "...error message..."
}
```


## Update Moment URI

This page documents the API endpoint for updating the URI (metadata) of an existing Moment on the In Process protocol. This endpoint allows artists to update the metadata URI associated with their Moments.

> **Note:** Only Moment admins can update the URI.

### Endpoint

```http
POST https://inprocess.fun/api/moment/update-uri
```

### Authentication

Include an API key in the x-api-key header for authorization:

```http
x-api-key: <artist_api_key>
```

<details>
  <summary>Show more</summary>

  See [Create an Artist API Key](/artists/api-keys/create) for how to create API keys.
</details>

### Request Body

Send a JSON object with the following fields:

```json
{
  "moment": {
    "contractAddress": "string", // Contract address of the Moment
    "tokenId": "string" // Token ID of the Moment to update
  },
  "newUri": "string" // New metadata URI (e.g., Arweave URI)
}
```

#### Body Parameters

| Name                   | Type   | Required | Description                                  |
| ---------------------- | ------ | -------- | -------------------------------------------- |
| moment                 | object | Yes      | Object containing the Moment identifier      |
| moment.contractAddress | string | Yes      | The contract address of the Moment to update |
| moment.tokenId         | string | Yes      | The token ID of the Moment to update         |
| newUri                 | string | Yes      | The new metadata URI to set for the Moment   |

### Example Requests

:::code-group
```bash [cURL]
curl -X POST https://inprocess.fun/api/moment/update-uri \
  -H "Content-Type: application/json" \
  -H "x-api-key: art_sk_3fnm4...f6w4" \
  -d '{
    "moment": {
      "contractAddress": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
      "tokenId": "1"
    },
    "newUri": "ar://new-metadata-uri"
  }'
```

```python [Python]
import requests

url = "https://inprocess.fun/api/moment/update-uri"
headers = {
  "Content-Type": "application/json",
  "x-api-key": "art_sk_3fnm4...f6w4"
}
payload = {
    "moment": {
        "contractAddress": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
        "tokenId": "1"
    },
    "newUri": "ar://new-metadata-uri"
}
response = requests.post(url, json=payload, headers=headers)
print(response.json())
```

```javascript [JavaScript]
const response = await fetch("https://inprocess.fun/api/moment/update-uri", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "x-api-key": "art_sk_3fnm4...f6w4",
  },
  body: JSON.stringify({
    moment: {
      contractAddress: "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
      tokenId: "1",
    },
    newUri: "ar://new-metadata-uri",
  }),
});
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface UpdateMomentURIRequest {
  moment: {
    contractAddress: string;
    tokenId: string;
  };
  newUri: string;
}

const payload: UpdateMomentURIRequest = {
  moment: {
    contractAddress: "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
    tokenId: "1",
  },
  newUri: "ar://new-metadata-uri",
};

const response = await fetch("https://inprocess.fun/api/moment/update-uri", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "x-api-key": "art_sk_3fnm4...f6w4",
  },
  body: JSON.stringify(payload),
});
const data = await response.json();
console.log(data);
```
:::

### Example Success Response

```json
{
  "hash": "0xTransactionHash",
  "chainId": 8453
}
```

#### Response Fields

| Name    | Type   | Description                                 |
| ------- | ------ | ------------------------------------------- |
| hash    | string | Transaction hash of the update operation    |
| chainId | number | Chain ID where the transaction was executed |

### Example Error Response

If an error occurs (e.g., invalid input, unauthorized access, or transaction failure), the API returns:

```json
{
  "message": "Invalid input",
  "errors": [
    {
      "field": "moment.contractAddress",
      "message": "Required"
    }
  ]
}
```

Or for server errors:

```json
{
  "message": "failed to update moment URI"
}
```

### Notes

* The URI update is executed onchain via a smart account transaction
* Only Moment admins can update the URI
* The transaction is processed using Coinbase CDP (Coinbase Developer Platform)
* The `tokenId` should be provided as a string, even if it's a numeric value


## Indexing a Moment

This page documents the API endpoint for **manually indexing or re-indexing** an existing Moment on the In Process protocol. While the protocol includes an automatic indexer, developers can use this endpoint to ensure that any Moment that was missed‚Äîor whose onchain metadata has changed‚Äîis up-to-date in the In Process database.

> **Tip:** If you want to create a brand-new Moment, see the [Create a Moment](/moment/create) docs instead.

### Endpoint

```http
POST https://inprocess.fun/api/moment/index
```

### Request Body

Send a JSON object with the following fields:

```json
{
  "address": "string", // Moment contract address
  "tokenId": 1, // (optional) Token ID to index (default: 1)
  "chainId": 8453 // (optional) Chain ID (default: 8453 for Base)
}
```

#### Body Parameters

| Name    | Type   | Required | Default | Description                                 |
| ------- | ------ | -------- | ------- | ------------------------------------------- |
| address | string | Yes      | ‚Äî       | The contract address of the Moment to index |
| tokenId | number | No       | 1       | The token ID of the Moment to index         |
| chainId | number | No       | 8453    | Chain ID where the contract lives           |

### Example Requests

:::code-group
```bash [cURL]
curl -X POST https://inprocess.fun/api/moment/index \
  -H "Content-Type: application/json" \
  -d '{
    "address": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
    "tokenId": 1,
    "chainId": 8453
  }'
```

```python [Python]
import requests

url = "https://inprocess.fun/api/moment/index"
payload = {
    "address": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
    "tokenId": 1,
    "chainId": 8453
}
response = requests.post(url, json=payload)
print(response.json())
```

```javascript [JavaScript]
const response = await fetch("https://inprocess.fun/api/moment/index", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    address: "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
    tokenId: 1,
    chainId: 8453,
  }),
});
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface IndexMomentRequest {
  address: string;
  tokenId?: number;
  chainId?: number;
}

const payload: IndexMomentRequest = {
  address: "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
  tokenId: 1,
  chainId: 8453,
};

const response = await fetch("https://inprocess.fun/api/moment/index", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(payload),
});
const data = await response.json();
```

```
```
:::

### Example Success Response

```json
{
  "status": "success",
  "message": "Moment indexed",
  "moment": {
    "address": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
    "tokenId": 1,
    "chainId": 8453,
    "id": "bceddfb3-28f2-49f3-8669-73a813a06b90",
    "uri": "ar://1wMmKuaz-VdxmruOQJuYS-3nfU3zlNKmPNpc79Ou-qM",
    "admin": "0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01",
    "createdAt": "2025-06-07T20:41:35+00:00",
    "hidden": false
  }
}
```

### Example Error Response

If the contract or token cannot be found (or another error occurs) the API returns:

```json
{
  "status": "error",
  "message": "...error message..."
}
```


## Get Moment Info

This page documents the API endpoint for retrieving detailed information about a Moment on the In Process protocol, including on-chain moment data, sales configuration, metadata, and moment admins.

### Endpoint

```http
GET https://inprocess.fun/api/moment
```

### Query Parameters

| Name          | Type   | Required | Default | Description                                      |
| ------------- | ------ | -------- | ------- | ------------------------------------------------ |
| tokenContract | string | Yes      | ‚Äî       | The contract address of the Moment               |
| tokenId       | string | Yes      | ‚Äî       | The token ID of the Moment                       |
| chainId       | string | No       | 8453    | Chain ID of the collection (default: Base, 8453) |

### Example Requests

:::code-group
```bash [cURL]
# With chainId (optional, defaults to 8453)
curl "https://inprocess.fun/api/moment?tokenContract=0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA&tokenId=1&chainId=8453"

# Without chainId (uses default: 8453)
curl "https://inprocess.fun/api/moment?tokenContract=0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA&tokenId=1"
```

```python [Python]
import requests

url = "https://inprocess.fun/api/moment"
params = {
    "tokenContract": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
    "tokenId": "1",
    # chainId is optional, defaults to 8453 (Base)
    # "chainId": "8453"
}
response = requests.get(url, params=params)
print(response.json())
```

```javascript [JavaScript]
const params = new URLSearchParams({
  tokenContract: "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
  tokenId: "1",
  // chainId is optional, defaults to 8453 (Base)
  // chainId: "8453"
});

const response = await fetch(`https://inprocess.fun/api/moment?${params}`);
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface GetMomentInfoParams {
  tokenContract: string;
  tokenId: string;
  chainId?: string; // Optional, defaults to "8453" (Base)
}

const params: GetMomentInfoParams = {
  tokenContract: "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
  tokenId: "1",
  // chainId is optional, defaults to "8453" (Base)
};

const queryString = new URLSearchParams({
  tokenContract: params.tokenContract,
  tokenId: params.tokenId,
});
// Only add chainId if provided
if (params.chainId) {
  queryString.set("chainId", params.chainId);
}

const response = await fetch(`https://inprocess.fun/api/moment?${queryString}`);
const data = await response.json();
console.log(data);
```
:::

### Example Response

```json
{
  "uri": "ar://0rs6Y23p-v19UC6VQTD6xvg-srCKFdUc7ngZwTWEDKM",
  "owner": "0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01",
  "saleConfig": {
    "type": "erc20Mint",
    "pricePerToken": "100000000000000000",
    "saleStart": 1717200000,
    "saleEnd": 18446744073709551615,
    "currency": "0xA0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"
  },
  "momentAdmins": ["0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01"],
  "metadata": {
    "name": "My Moment",
    "image": "ar://U2PRZhy-S_Lrz_AMx-Qh2n6x8Lm3smO9SsLuno1DXRU",
    "description": "A description of the moment",
    "content": {
      "mime": "audio/mpeg",
      "uri": "ar://z5RXUDCbzwHVJ49emY7XteJScYYP4baBxgVeaqFM3rM"
    }
  }
}
```

### SalesConfig Reference

The `saleConfig` object in the response contains the sales configuration for the Moment. This includes pricing, sale timing, and minting limits.

To learn more about SalesConfig, go to [SalesConfig Reference](/moment/create/salesConfig).


## Creating a Moment

This page documents the API endpoint for creating a new Moment on the In Process protocol. No signature is required for this endpoint.

> **Note:** You can view the collective timeline by [browsing the timeline](/timeline).

### Endpoint

```
POST https://inprocess.fun/api/moment/create
```

### Request Body

Send a JSON object with the following fields:

```json
{
  "contract": {
    "name": "string", // Name of the contract
    "uri": "string" // Metadata URI for the contract (e.g., Arweave URI)
  },
  "token": {
    "tokenMetadataURI": "string", // Metadata URI for the token (e.g., Arweave URI)
    "createReferral": "string", // Referral recipient address
    "salesConfig": {
      "type": "string",
      "pricePerToken": "string",
      "saleStart": 1717200000,
      "saleEnd": 18446744073709551615
    }, // Sales configuration object
    "mintToCreatorCount": 1, // Number of tokens to mint to creator (usually 1)
    "payoutRecipient": "string" // Optional: Address to receive sale proceeds (defaults to creator if not provided)
  },
  "splits": {
    "recipients": ["string"], // Array of recipient addresses
    "percentAllocations": [number] // Array of allocation percentages (0-100, must sum to 100)
  }, // Optional: Splits configuration for revenue sharing
  "account": "string" // Creator's address
}
```

### Example Request

:::code-group
```bash [cURL]
curl -X POST https://inprocess.fun/api/moment/create \
  -H "Content-Type: application/json" \
  -d '{
    "contract": {
      "name": "My Music Moment",
      "uri": "https://arweave.net/abc123"
    },
    "token": {
      "tokenMetadataURI": "https://arweave.net/abc123",
      "createReferral": "0xReferralAddress",
      "salesConfig": {
        "type": "fixedPrice",
        "pricePerToken": "100000000000000000", // 0.1 ETH in wei (18 decimals)
        "saleStart": 1717200000,
        "saleEnd": 18446744073709551615
      },
      "mintToCreatorCount": 1,
      "payoutRecipient": "0xPayoutAddress" // Optional: defaults to creator if not provided
    },
    "splits": {
      "recipients": ["0xRecipient1", "0xRecipient2"],
      "percentAllocations": [60, 40] // Optional: 60% and 40%
    },
    "account": "0xCreatorAddress"
  }'
```

```python [Python]
import requests

url = "https://inprocess.fun/api/moment/create"
payload = {
    "contract": {
        "name": "My Music Moment",
        "uri": "https://arweave.net/abc123"
    },
    "token": {
        "tokenMetadataURI": "https://arweave.net/abc123",
        "createReferral": "0xReferralAddress",
        "salesConfig": {
            "type": "fixedPrice",
            "pricePerToken": "100000000000000000",
            "saleStart": 1717200000,
            "saleEnd": 18446744073709551615
        },
        "mintToCreatorCount": 1,
        "payoutRecipient": "0xPayoutAddress"  # Optional: defaults to creator if not provided
    },
    "splits": {
        "recipients": ["0xRecipient1", "0xRecipient2"],
        "percentAllocations": [60, 40]  # Optional: 60% and 40%
    },
    "account": "0xCreatorAddress"
}
response = requests.post(url, json=payload)
print(response.json())
```

```javascript [JavaScript]
const response = await fetch("https://inprocess.fun/api/moment/create", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    contract: {
      name: "My Music Moment",
      uri: "https://arweave.net/abc123",
    },
    token: {
      tokenMetadataURI: "https://arweave.net/abc123",
      createReferral: "0xReferralAddress",
      salesConfig: {
        type: "fixedPrice",
        pricePerToken: "100000000000000000",
        saleStart: 1717200000,
        saleEnd: 18446744073709551615,
      },
      mintToCreatorCount: 1,
      payoutRecipient: "0xPayoutAddress", // Optional: defaults to creator if not provided
    },
    splits: {
      // Optional: Configure revenue sharing splits
      recipients: ["0xRecipient1", "0xRecipient2"],
      percentAllocations: [60, 40], // 60% and 40%
    },
    account: "0xCreatorAddress",
  }),
});
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface SalesConfig {
  type: "fixedPrice";
  pricePerToken: string;
  saleStart: number;
  saleEnd: number;
}

interface SplitsConfig {
  recipients: string[];
  percentAllocations: number[];
}

interface CreateMomentRequest {
  contract: {
    name: string;
    uri: string;
  };
  token: {
    tokenMetadataURI: string;
    createReferral: string;
    salesConfig: SalesConfig;
    mintToCreatorCount: number;
    payoutRecipient?: string; // Optional: Address to receive sale proceeds
  };
  splits?: SplitsConfig; // Optional: Splits configuration for revenue sharing
  account: string;
}

const payload: CreateMomentRequest = {
  contract: {
    name: "My Music Moment",
    uri: "https://arweave.net/abc123",
  },
  token: {
    tokenMetadataURI: "https://arweave.net/abc123",
    createReferral: "0xReferralAddress",
    salesConfig: {
      type: "fixedPrice",
      pricePerToken: "100000000000000000",
      saleStart: 1717200000,
      saleEnd: 18446744073709551615,
    },
    mintToCreatorCount: 1,
    payoutRecipient: "0xPayoutAddress", // Optional: defaults to creator if not provided
  },
  splits: {
    // Optional: Configure revenue sharing splits
    recipients: ["0xRecipient1", "0xRecipient2"],
    percentAllocations: [60, 40], // 60% and 40%
  },
  account: "0xCreatorAddress",
};

const response = await fetch("https://inprocess.fun/api/moment/create", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(payload),
});
const data = await response.json();
console.log(data);
```
:::

### Example Response

```json
{
  "contractAddress": "0xContractAddress",
  "tokenId": "1",
  "hash": "0xTransactionHash"
}
```

### Splits Configuration

You can optionally configure revenue splits to automatically distribute sale proceeds to multiple recipients. When splits are configured, the `payoutRecipient` in the token configuration will be set to the splits contract address, which will automatically distribute funds according to the specified allocations.

To learn more about Splits Configuration, go to [Splits Configuration Reference](/moment/create/splits).

To learn more about SalesConfig, go to [SalesConfig Reference](/moment/create/salesConfig)


### SalesConfig Reference

The `salesConfig` object defines how the writing moment can be sold or minted. The structure depends on the `type` field:

#### ERC20 Mint Example

```json
{
  "type": "erc20Mint",
  "pricePerToken": "1000000", // (parsed units, e.g., USDC has 6 decimals)
  "saleStart": 1717200000, // Unix timestamp (seconds)
  "saleEnd": 18446744073709551615, // maxUint64 for no end
  "currency": "0xA0b86991c6218b36c1d19d4a2e9eb0ce3606eb48" // USDC address
}
```

#### Fixed Price Example

```json
{
  "type": "fixedPrice",
  "pricePerToken": "100000000000000000", // (parsed units, e.g., ETH has 18 decimals)
  "saleStart": 1717200000, // Unix timestamp (seconds)
  "saleEnd": 18446744073709551615 // maxUint64 for no end
  // Note: No 'currency' field for fixedPrice
}
```

* The `currency` parameter only exists if `type` is `erc20Mint`.
* For `fixedPrice`, the sale is denominated in the native token (e.g., ETH), and `currency` is omitted.


### Splits Configuration Reference

The `splits` object defines how revenue from moment sales will be distributed among multiple recipients. This configuration is optional.

#### Splits Structure

```json
{
  "splits": {
    "recipients": ["0xRecipient1", "0xRecipient2", "0xRecipient3"],
    "percentAllocations": [50, 30, 20]
  }
}
```

#### Fields

* **`recipients`**: Array of Ethereum addresses that will receive a share of the revenue
* **`percentAllocations`**: Array of percentages (0-100). The sum must equal 100. The backend API will validate this value.

#### Important Notes

* The splits contract owner will be set to the creator's smart wallet
* If `splits` is provided, the `payoutRecipient` in the token configuration will be automatically set to the splits contract address
* If `splits` is not provided, you can optionally specify a `payoutRecipient` directly in the token configuration
* The `percentAllocations` array must have the same length as the `recipients` array
* The sum of all `percentAllocations` must equal exactly 100. The backend API will validate this value.

#### Example: Two-Way Split

```json
{
  "splits": {
    "recipients": ["0xRecipient1", "0xRecipient2"],
    "percentAllocations": [60, 40] // 60% and 40%
  }
}
```

#### Example: Three-Way Split

```json
{
  "splits": {
    "recipients": ["0xRecipient1", "0xRecipient2", "0xRecipient3"],
    "percentAllocations": [50, 30, 20] // 50%, 30%, and 20%
  }
}
```


## Creating a Writing Moment

This page documents the API endpoint for creating a new Writing Moment on the In Process protocol. No signature is required for this endpoint.

> **Note:** You can view the collective timeline by [browsing the timeline](/timeline).

### Endpoint

```
POST https://inprocess.fun/api/moment/create/writing
```

### Request Body

Send a JSON object with the following fields:

```json
{
  "contract": {
    "name": "string" // Name of the contract
  },
  "token": {
    "tokenContent": "string", // Writing content for the token (e.g., "Hello world")
    "createReferral": "string", // Referral recipient address
    "salesConfig": {
      "type": "string",
      "pricePerToken": "string",
      "saleStart": 1717200000,
      "saleEnd": 18446744073709551615
    }, // Sales configuration object
    "mintToCreatorCount": 1, // Number of tokens to mint to creator (usually 1)
    "payoutRecipient": "string" // Optional: Address to receive sale proceeds (defaults to creator if not provided)
  },
  "splits": {
    "recipients": ["string"], // Array of recipient addresses
    "percentAllocations": [number] // Array of allocation percentages (0-100, must sum to 100)
  }, // Optional: Splits configuration for revenue sharing
  "account": "string" // Creator's address
}
```

### Example Request

:::code-group
```bash [cURL]
curl -X POST https://inprocess.fun/api/moment/create/writing \
  -H "Content-Type: application/json" \
  -d '{
    "contract": {
      "name": "My Writing Moment"
    },
    "token": {
      "tokenContent": "Hello world",
      "createReferral": "0xReferralAddress",
      "salesConfig": {
        "type": "fixedPrice",
        "pricePerToken": "100000000000000000", // 0.1 ETH in wei (18 decimals)
        "saleStart": 1717200000,
        "saleEnd": 18446744073709551615
      },
      "mintToCreatorCount": 1,
      "payoutRecipient": "0xPayoutAddress" // Optional: defaults to creator if not provided
    },
    "splits": {
      "recipients": ["0xRecipient1", "0xRecipient2"],
      "percentAllocations": [60, 40] // Optional: 60% and 40%
    },
    "account": "0xCreatorAddress"
  }'
```

```python [Python]
import requests

url = "https://inprocess.fun/api/moment/create/writing"
payload = {
    "contract": {
        "name": "My Writing Moment",
    },
    "token": {
      "tokenContent": "Hello world",
      "createReferral": "0xReferralAddress",
      "salesConfig": {
        "type": "fixedPrice",
        "pricePerToken": "100000000000000000",  # 0.1 ETH in wei (18 decimals)
        "saleStart": 1717200000,
        "saleEnd": 18446744073709551615
      },
      "mintToCreatorCount": 1,
      "payoutRecipient": "0xPayoutAddress"  # Optional: defaults to creator if not provided
    },
    "splits": {
      "recipients": ["0xRecipient1", "0xRecipient2"],
        "percentAllocations": [60, 40]  # Optional: 60% and 40%
    },
    "account": "0xCreatorAddress"
}
response = requests.post(url, json=payload)
print(response.json())
```

```javascript [JavaScript]
const response = await fetch(
  "https://inprocess.fun/api/moment/create/writing",
  {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      contract: {
        name: "My Writing Moment",
      },
      token: {
        tokenContent: "Hello world",
        createReferral: "0xReferralAddress",
        salesConfig: {
          type: "fixedPrice",
          pricePerToken: "100000000000000000", // 0.1 ETH in wei (18 decimals)
          saleStart: 1717200000,
          saleEnd: 18446744073709551615,
        },
        mintToCreatorCount: 1,
        payoutRecipient: "0xPayoutAddress", // Optional: defaults to creator if not provided
      },
      splits: {
        // Optional: Configure revenue sharing splits
        recipients: ["0xRecipient1", "0xRecipient2"],
        percentAllocations: [60, 40], // 60% and 40%
      },
      account: "0xCreatorAddress",
    }),
  }
);
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface SalesConfig {
  type: "fixedPrice";
  pricePerToken: string;
  saleStart: number;
  saleEnd: number;
}

interface SplitsConfig {
  recipients: string[];
  percentAllocations: number[];
}

interface CreateWritingMomentRequest {
  contract: {
    name: string;
  };
  token: {
    tokenContent: string;
    createReferral: string;
    salesConfig: SalesConfig;
    mintToCreatorCount: number;
    payoutRecipient?: string; // Optional: Address to receive sale proceeds
  };
  splits?: SplitsConfig; // Optional: Splits configuration for revenue sharing
  account: string;
}

const payload: CreateWritingMomentRequest = {
  contract: {
    name: "My Writing Moment",
  },
  token: {
    tokenContent: "Hello world",
    createReferral: "0xReferralAddress",
    salesConfig: {
      type: "fixedPrice",
      pricePerToken: "100000000000000000", // 0.1 ETH in wei (18 decimals)
      saleStart: 1717200000,
      saleEnd: 18446744073709551615,
    },
    mintToCreatorCount: 1,
    payoutRecipient: "0xPayoutAddress", // Optional: defaults to creator if not provided
  },
  splits: {
    // Optional: Configure revenue sharing splits
    recipients: ["0xRecipient1", "0xRecipient2"],
    percentAllocations: [60, 40], // 60% and 40%
  },
  account: "0xCreatorAddress",
};

const response = await fetch(
  "https://inprocess.fun/api/moment/create/writing",
  {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  }
);
const data = await response.json();
console.log(data);
```
:::

### Example Response

```json
{
  "contractAddress": "0xContractAddress",
  "tokenId": "1",
  "hash": "0xTransactionHash"
}
```

### Splits Configuration

You can optionally configure revenue splits to automatically distribute sale proceeds to multiple recipients. When splits are configured, the `payoutRecipient` in the token configuration will be set to the splits contract address, which will automatically distribute funds according to the specified allocations.

To learn more about Splits Configuration, go to [Splits Configuration Reference](/moment/create/splits).

To learn more about SalesConfig, go to [SalesConfig Reference](/moment/create/salesConfig)


## Get Comments

This page documents the API endpoint for retrieving Moment comments on the In Process protocol.

### Endpoint

```http
GET https://inprocess.fun/api/moment/comments
```

### Query Parameters

The following query parameters are required:

* `contractAddress` (string): Moment contract address
* `tokenId` (string): Token ID
* `chainId` (number): Chain ID
* `offset` (number): Pagination offset (optional, defaults to 0)

### Example Requests

:::code-group
```bash [cURL]
curl "https://inprocess.fun/api/moment/comments?contractAddress=0x297F21AAc502571db2c7dBFD271E68Dae7F2cE1E&tokenId=1&chainId=84532&offset=0"
```

```python [Python]
import requests

url = "https://inprocess.fun/api/moment/comments"
params = {
  "contractAddress": "0x297F21AAc502571db2c7dBFD271E68Dae7F2cE1E",
  "tokenId": "1",
  "chainId": 84532,
  "offset": 0
}
response = requests.get(url, params=params)
print(response.json())
```

```javascript [JavaScript]
const params = new URLSearchParams({
  contractAddress: "0x297F21AAc502571db2c7dBFD271E68Dae7F2cE1E",
  tokenId: "1",
  chainId: "84532",
  offset: "0",
});

const response = await fetch(
  `https://inprocess.fun/api/moment/comments?${params}`
);
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface CommentsQueryParams {
  contractAddress: string;
  tokenId: string;
  chainId: number;
  offset?: number;
}

const params: CommentsQueryParams = {
  contractAddress: "0x297F21AAc502571db2c7dBFD271E68Dae7F2cE1E",
  tokenId: "1",
  chainId: 84532,
  offset: 0,
};

const queryString = new URLSearchParams({
  contractAddress: params.contractAddress,
  tokenId: params.tokenId,
  chainId: params.chainId.toString(),
  offset: params.offset?.toString() || "0",
});

const response = await fetch(
  `https://inprocess.fun/api/moment/comments?${queryString}`
);
const data = await response.json();
```

```
```
:::

### Example Response

```json
{
  "comments": [
    {
      "sender": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
      "comment": "in‚Ä¢process!!!",
      "timestamp": 1761056680
    }
  ]
}
```

```
```


## Collect a Moment

This page documents the API endpoint to collect a Moment on the In Process protocol.

### Endpoint

```
POST https://inprocess.fun/api/moment/collect
```

### Authentication

Include an API key in the x-api-key header for authorization:

```http
x-api-key: <artist_api_key>
```

<details>
  <summary>Show more</summary>

  See [Create an Artist API Key](/artists/api-keys/create) for how to create API keys.
</details>

### Request Body

Send a JSON object with the following fields:

```json
{
  "moment": {
    "contractAddress": string, // Moment address
    "tokenId": string // TokenId of moment
  },
  "amount": number, // Amount to be collected
  "comment": string // Comment
}
```

### Example Request

:::code-group
```bash [cURL]
curl -X POST https://inprocess.fun/api/moment/collect \
  -H "Content-Type: application/json" \
  -H "x-api-key: art_sk_3fnm4...f6w4" \
  -d '{
    "moment": {
      "contractAddress": "0x297F21AAc502571db2c7dBFD271E68Dae7F2cE1E",
      "tokenId": "1"
    },
    "amount": 1,
    "comment": "in‚Ä¢process!!!"
  }'
```

```python [Python]
import requests

url = "https://inprocess.fun/api/moment/collect"
headers = {
  "Content-Type": "application/json",
  "x-api-key": "art_sk_3fnm4...f6w4"
}
payload = {
  "moment": {
    "contractAddress": "0x297F21AAc502571db2c7dBFD271E68Dae7F2cE1E",
    "tokenId": "1"
  },
  "amount": 1,
  "comment": "in‚Ä¢process!!!"
}
response = requests.post(url, json=payload, headers=headers)
print(response.json())
```

```javascript [JavaScript]
const response = await fetch("https://inprocess.fun/api/moment/collect", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "x-api-key": "art_sk_3fnm4...f6w4",
  },
  body: JSON.stringify({
    moment: {
      contractAddress: "0x297F21AAc502571db2c7dBFD271E68Dae7F2cE1E",
      tokenId: "1",
    },
    amount: 1,
    comment: "in‚Ä¢process!!!",
  }),
});
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface CollectMomentRequest {
  moment: {
    contractAddress: string;
    tokenId: string;
  };
  amount: number;
  comment: string;
}

const payload: CollectMomentRequest = {
  moment: {
    contractAddress: "0x297F21AAc502571db2c7dBFD271E68Dae7F2cE1E",
    tokenId: "1",
  },
  amount: 1,
  comment: "in‚Ä¢process!!!",
};

const response = await fetch("https://inprocess.fun/api/moment/collect", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "x-api-key": "art_sk_3fnm4...f6w4",
  },
  body: JSON.stringify(payload),
});
const data = await response.json();
console.log(data);
```
:::

### Example Response

```json
{
  "hash": "0xTransactionHash",
  "chainId": 8453 | 84532
}
```


## Airdrop a Moment

This page documents the API endpoint to airdrop a Moment on the In Process protocol.

### Endpoint

```
POST https://inprocess.fun/api/moment/airdrop
```

### Authentication

Include an API key in the x-api-key header for authorization:

```http
x-api-key: <artist_api_key>
```

<details>
  <summary>Show more</summary>

  See [Create an Artist API Key](/artists/api-keys/create) for how to create API keys.
</details>

### Request Body

Send a JSON object with the following fields:

```json
{
  "recipients": [
    {
      "recipientAddress": string, // Address to receive the airdrop
      "tokenId": string // TokenId of the moment to airdrop
    }
  ],
  "momentContract": string, // Contract address of the moment collection
}
```

### Example Request

:::code-group
```bash [cURL]
curl -X POST https://inprocess.fun/api/moment/airdrop \
  -H "Content-Type: application/json" \
  -H "x-api-key: art_sk_3fnm4...f6w4" \
  -d '{
    "recipients": [
      {
        "recipientAddress": "0x119A62232b96ADfC85E40C57fE44acA740CF6730",
        "tokenId": "1"
      }
    ],
    "momentContract": "0x88aadf78a71c0da420294ad09cd378233b4e243e",
  }'
```

```python [Python]
import requests

url = "https://inprocess.fun/api/moment/airdrop"
headers = {
  "Content-Type": "application/json",
  "x-api-key": "art_sk_3fnm4...f6w4"
}
payload = {
  "recipients": [
    {
      "recipientAddress": "0x119A62232b96ADfC85E40C57fE44acA740CF6730",
      "tokenId": "1"
    }
  ],
  "momentContract": "0x88aadf78a71c0da420294ad09cd378233b4e243e",
}
response = requests.post(url, json=payload, headers=headers)
print(response.json())
```

```javascript [JavaScript]
const response = await fetch("https://inprocess.fun/api/moment/airdrop", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "x-api-key": "art_sk_3fnm4...f6w4",
  },
  body: JSON.stringify({
    recipients: [
      {
        recipientAddress: "0x119A62232b96ADfC85E40C57fE44acA740CF6730",
        tokenId: "1",
      },
    ],
    momentContract: "0x88aadf78a71c0da420294ad09cd378233b4e243e",
  }),
});
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface AirdropMomentRequest {
  recipients: {
    recipientAddress: string;
    tokenId: string;
  }[];
  momentContract: string;
}

const payload: AirdropMomentRequest = {
  recipients: [
    {
      recipientAddress: "0x119A62232b96ADfC85E40C57fE44acA740CF6730",
      tokenId: "1",
    },
  ],
  momentContract: "0x88aadf78a71c0da420294ad09cd378233b4e243e",
};

const response = await fetch("https://inprocess.fun/api/moment/airdrop", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "x-api-key": "art_sk_3fnm4...f6w4",
  },
  body: JSON.stringify(payload),
});
const data = await response.json();
console.log(data);
```
:::

### Example Response

```json
{
  "hash": "0xTransactionHash",
  "chainId": 8453 | 84532
}
```


## Browsing the Timeline

Retrieve moments from the collective timeline. Supports pagination for efficient browsing.

> **Note:** You can add a moment to the collective timeline by [creating a moment](/moment/create).

### Endpoint

```http
GET https://inprocess.fun/api/timeline
```

### Parameters

| Name    | Type    | Required | Default | Description                                                                |
| ------- | ------- | -------- | ------- | -------------------------------------------------------------------------- |
| limit   | number  | No       | 100     | Number of records per page (max: 100)                                      |
| page    | number  | No       | 1       | The page number to retrieve                                                |
| latest  | boolean | No       | true    | Sort by most recent first                                                  |
| artist  | string  | No       | ‚Äî       | Filter by admin address (only moments administered by this artist address) |
| chainId | number  | No       | 8453    | Filter by chain ID (default: Base chain, 8453)                             |
| hidden  | boolean | No       | false   | If true, includes moments marked as hidden by the admin (default: false)   |

You can filter the timeline to only show moments administered by a specific artist by providing the `artist` address as a query parameter. You can also filter by chain using the `chainId` parameter (default: 8453 for Base). To include moments that have been marked as hidden by the admin, set the `hidden` parameter to `true` (defaults to `false`).

### Request Examples

:::code-group
```bash [cURL]
curl -X GET "https://inprocess.fun/api/timeline?artist=0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01&chainId=8453&limit=2&page=1&latest=true&hidden=true"
```

```python [Python]
import requests

def get_timeline(page: int = 1, limit: int = 100, latest: bool = True, artist: str = None, chainId: int = 8453, hidden: bool = False):
    url = "https://inprocess.fun/api/timeline"
    params = {"page": page, "limit": limit, "latest": latest, "chainId": chainId}
    if artist:
        params["artist"] = artist
    if hidden:
        params["hidden"] = str(hidden).lower()
    response = requests.get(url, params=params)
    response.raise_for_status()
    return response.json()
```

```javascript [JavaScript]
async function getTimeline(
  page = 1,
  limit = 100,
  latest = true,
  artist,
  chainId = 8453,
  hidden = false
) {
  const params = new URLSearchParams({
    page: page.toString(),
    limit: limit.toString(),
    latest: latest.toString(),
    chainId: chainId.toString(),
  });
  if (artist) params.set("artist", artist);
  if (hidden) params.set("hidden", hidden.toString());
  const response = await fetch(`https://inprocess.fun/api/timeline?${params}`);
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```

```typescript [TypeScript]
export interface Moment {
  address: string; // Address
  tokenId: string;
  chainId: number;
  id: string; // uuid
  uri: string;
  admin: string; // Address
  createdAt: string; // timestampz
  username: string; // Username of the admin/artist, if available
}

export interface TimelineResponse {
  status: string;
  moments: Moment[];
  pagination: {
    total_count: number;
    page: number;
    limit: number;
    total_pages: number;
  };
}

async function getTimeline(
  page: number = 1,
  limit: number = 100,
  latest: boolean = true,
  artist?: string,
  chainId: number = 8453,
  hidden: boolean = false
): Promise<TimelineResponse> {
  const params = new URLSearchParams({
    page: page.toString(),
    limit: limit.toString(),
    latest: latest.toString(),
    chainId: chainId.toString(),
  });
  if (artist) params.set("artist", artist);
  if (hidden) params.set("hidden", hidden.toString());
  const response = await fetch(`https://inprocess.fun/api/timeline?${params}`);
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return await response.json();
}
```
:::

### Response Format

The API returns JSON responses. Here's an example success response:

```json
{
  "status": "success",
  "moments": [
    {
      "address": "0x06a701Ae65582B92Af48cDff45a8B20DcA3714cA",
      "tokenId": "0",
      "chainId": 8453,
      "id": "bceddfb3-28f2-49f3-8669-73a813a06b90",
      "uri": "ar://1wMmKuaz-VdxmruOQJuYS-3nfU3zlNKmPNpc79Ou-qM",
      "admin": "0x29b6674c1562e31EdFd9709D9576e8E5F1e68d01",
      "createdAt": "2025-06-07T20:41:35+00:00",
      "username": "artist name",
      "hidden": false
    },
    {
      "address": "0x317e6E49970b95DD1bF2E7877110f3278CB8f1EA",
      "tokenId": "0",
      "chainId": 8453,
      "id": "5fc69bea-1a8a-47f0-8652-8bf041c16a06",
      "uri": "ar://T5bcXlR7waq_aexj0Sp7SXR5uvwg3qAlMuai9oh6w-U",
      "admin": "0x4b4324bcC6dB9380ABBbbD20B24A16C11FB5B38A",
      "createdAt": "2025-06-07T17:13:07+00:00",
      "username": "artist name",
      "hidden": false
    }
  ],
  "pagination": {
    "total_count": 2,
    "page": 1,
    "limit": 2,
    "total_pages": 1
  }
}
```

### Response Properties

#### Response Object

| Property                | Type    | Description                                  |
| ----------------------- | ------- | -------------------------------------------- |
| status                  | string  | Status of the request ("success" or "error") |
| moments                 | array   | List of moments in the timeline              |
| moments\[].address      | string  | Moment contract address                      |
| moments\[].tokenId      | string  | Moment ID                                    |
| moments\[].chainId      | number  | Chain ID                                     |
| moments\[].id           | string  | UUID of the moment                           |
| moments\[].uri          | string  | Metadata URI                                 |
| moments\[].admin        | string  | Admin address                                |
| moments\[].createdAt    | string  | ISO timestamp when the moment was created    |
| moments\[].username     | string  | Username of the admin/artist, if available   |
| moments\[].hidden       | boolean | Whether the moment is hidden (admin only)    |
| pagination              | object  | Pagination metadata for the response         |
| pagination.total\_count | number  | Total number of moments available            |
| pagination.page         | number  | Current page number                          |
| pagination.limit        | number  | Number of moments per page                   |
| pagination.total\_pages | number  | Total number of pages available              |

### Error Response

If an error occurs, the API returns:

```json
{
  "status": "error",
  "message": "...error message..."
}
```


## Connect a Social Wallet

This page documents API endpoints to connect a social wallet and an artist wallet on the In Process protocol.

### Endpoint

```
POST https://inprocess.fun/api/artists/wallets
```

### Request Body

Send a JSON object with the following fields:

```json
{
  "artist_wallet": "0x51027631B9DEF86e088C33368eC4E3A4BE0aD264",
  "social_wallet": "0x643D962630E35B49340C23079fBac7D8546d8D01"
}
```

### Example Request

:::code-group
```bash [cURL]
curl -X POST https://inprocess.fun/api/artists/wallets \
  -H "Content-Type: application/json" \
  -d '{
    "artist_wallet": "0x51027631B9DEF86e088C33368eC4E3A4BE0aD264",
    "social_wallet": "0x643D962630E35B49340C23079fBac7D8546d8D01"
  }'
```

```python [Python]
import requests

url = "https://inprocess.fun/api/artists/wallets"
payload = {
  "artist_wallet": "0x51027631B9DEF86e088C33368eC4E3A4BE0aD264",
  "social_wallet": "0x643D962630E35B49340C23079fBac7D8546d8D01"
}
response = requests.post(url, json=payload)
print(response.json())
```

```javascript [JavaScript]
const response = await fetch("https://inprocess.fun/api/artists/wallets", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    artist_wallet: "0x51027631B9DEF86e088C33368eC4E3A4BE0aD264",
    social_wallet: "0x643D962630E35B49340C23079fBac7D8546d8D01",
  }),
});
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface ConnectSocialWalletRequest {
  artist_wallet: string;
  social_wallet: string;
}

const payload: ConnectSocialWalletRequest = {
  artist_wallet: "0x51027631B9DEF86e088C33368eC4E3A4BE0aD264",
  social_wallet: "0x643D962630E35B49340C23079fBac7D8546d8D01",
};

const response = await fetch("https://inprocess.fun/api/artists/wallets", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(payload),
});
const data = await response.json();
console.log(data);
```
:::

### Example Response

```json
{
  "success": true
}
```


## Disconnect a Social Wallet

This page documents API endpoints to disconnect a social wallet and an artist wallet on the In Process protocol.

### Endpoint

```
DELETE https://inprocess.fun/api/artists/wallets
```

### Request Body

Send a JSON object with the following fields:

```json
{
  "social_wallet": "0x643D962630E35B49340C23079fBac7D8546d8D01"
}
```

### Example Request

:::code-group
```bash [cURL]
curl -X DELETE https://inprocess.fun/api/artists/wallets \
  -H "Content-Type: application/json" \
  -d '{
    "social_wallet": "0x643D962630E35B49340C23079fBac7D8546d8D01"
  }'
```

```python [Python]
import requests

url = "https://inprocess.fun/api/artists/wallets"
payload = {
  "social_wallet": "0x643D962630E35B49340C23079fBac7D8546d8D01"
}
response = requests.delete(url, json=payload)
print(response.json())
```

```javascript [JavaScript]
const response = await fetch("https://inprocess.fun/api/artists/wallets", {
  method: "delete",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    social_wallet: "0x643D962630E35B49340C23079fBac7D8546d8D01",
  }),
});
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface DisconnectSocialWalletRequest {
  social_wallet: string;
}

const payload: DisconnectSocialWalletRequest = {
  social_wallet: "0x643D962630E35B49340C23079fBac7D8546d8D01",
};

const response = await fetch("https://inprocess.fun/api/artists/wallets", {
  method: "delete",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(payload),
});
const data = await response.json();
console.log(data);
```
:::

### Example Response

```json
{
  "success": true
}
```


## Getting an Artist Wallet

This page documents the API endpoint to get an artist wallet associated with a social wallet on the In Process protocol.

### Endpoint

```
GET https://inprocess.fun/api/artists/wallets
```

### Query Parameters

Send the social wallet address as a query parameter in the URL:

| Name           | Type   | Required | Default | Description                    |
| -------------- | ------ | -------- | ------- | ------------------------------ |
| social\_wallet | string | Yes      | ‚Äî       | The address of a social wallet |

### Example Request

:::code-group
```bash [cURL]
curl -X GET "https://inprocess.fun/api/artists/wallets?social_wallet=0x643D962630E35B49340C23079fBac7D8546d8D01"
```

```python [Python]
import requests
params = {}
params["social_wallet"] = "0x643D962630E35B49340C23079fBac7D8546d8D01"
url = "https://inprocess.fun/api/artists/wallets"
response = requests.get(url, params=params)
print(response.json())
```

```javascript [JavaScript]
const params = new URLSearchParams();
params.set("social_wallet", "0x643D962630E35B49340C23079fBac7D8546d8D01");
const response = await fetch(
  `https://inprocess.fun/api/artists/wallets?${params}`
);
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface GetArtistWalletResponse {
  address: string;
}
const params = new URLSearchParams();
params.set("social_wallet", "0x643D962630E35B49340C23079fBac7D8546d8D01");
const response = await fetch(
  `https://inprocess.fun/api/artists/wallets?${params}`
);
const data: GetArtistWalletResponse = await response.json();
console.log(data);
```
:::

### Example Response

```json
{
  "address": "0x51027631B9DEF86e088C33368eC4E3A4BE0aD264" // artist wallet address associated with social wallet
}
```


## Create an Artist API Key

This page documents the API endpoint for creating a new API key for artists on the In Process protocol.

### Overview

Artists can create API keys in two ways:

1. **Programmatically** - Using the API endpoint documented below
2. **Via Web Interface** - Using the [In Process API Keys Management Site](https://inprocess.fun/manage/api-keys)

The web interface provides a user-friendly way to create, view, and manage an artist API keys without writing code.

### Endpoint

```http
POST https://inprocess.fun/artists/api-keys
```

### Authentication

Include a Privy access token in the Authorization header as a Bearer token:

```http
Authorization: Bearer <accessToken>
```

> **Note:** This endpoint requires a Privy access token for authentication. Privy access tokens are obtained through the Privy authentication flow and provide secure access to artist-specific API endpoints. For more information about Privy authentication, see the [Privy documentation](https://docs.privy.io/authentication/user-authentication/access-tokens#getting-the-access-token).

### Request Body

Send a JSON object with the following fields:

```json
{
  "key_name": "string" // Name for the API key
}
```

#### Body Parameters

| Name      | Type   | Required | Description                        |
| --------- | ------ | -------- | ---------------------------------- |
| key\_name | string | Yes      | A descriptive name for the API key |

### Example Requests

:::code-group
```bash [cURL]
curl -X POST https://inprocess.fun/artists/api-keys \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your_access_token_here" \
  -d '{
    "key_name": "My Production API Key"
  }'
```

```python [Python]
import requests

url = "https://inprocess.fun/artists/api-keys"
headers = {
  "Content-Type": "application/json",
  "Authorization": "Bearer your_access_token_here"
}
payload = {
  "key_name": "My Production API Key"
}
response = requests.post(url, json=payload, headers=headers)
print(response.json())
```

```javascript [JavaScript]
const response = await fetch("https://inprocess.fun/artists/api-keys", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    Authorization: "Bearer your_access_token_here",
  },
  body: JSON.stringify({
    key_name: "My Production API Key",
  }),
});
const data = await response.json();
console.log(data);
```

```typescript [TypeScript]
interface CreateApiKeyRequest {
  key_name: string;
}

const payload: CreateApiKeyRequest = {
  key_name: "My Production API Key",
};

const response = await fetch("https://inprocess.fun/artists/api-keys", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    Authorization: "Bearer your_access_token_here",
  },
  body: JSON.stringify(payload),
});
const data = await response.json();
```
:::

### Example Response

```json
{
  "key": "art_sk_1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
}
```

### Response Fields

| Name | Type   | Description                          |
| ---- | ------ | ------------------------------------ |
| key  | string | The generated API key for the artist |

